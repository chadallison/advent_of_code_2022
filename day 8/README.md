advent of code - day 8
================
chad allison \| 8 december 2022

### loading tidyverse

``` r
library(tidyverse)
```

### loading input

``` r
input = readLines("day8_input.txt")
input[1:10]
```

    ##  [1] "000101002102003121323241144233304242044444224322555122224111442430042002422404011033200102312010222"
    ##  [2] "221001210320111200023341022214223134031413111451532412355524552433013131441430430230031133003002220"
    ##  [3] "122221231000323320200234443123410222443555111531251244245532551533102324231134241400331231103311202"
    ##  [4] "002101002220302234344333042430134115513332123415135441434515521411543331101323034131002231322012200"
    ##  [5] "012103211131230310231112144234315535452455525223214133132235223543125544102124134031231131222210112"
    ##  [6] "111130002131003013423030312121141451112312221535313252455443343322525321202043441240023211102333110"
    ##  [7] "010101133203222432223112115322531452121232111514435241332455323133154311225111113101042100133231220"
    ##  [8] "212312122201423311012344443454341224424241453264363522215552425444132445311420002412240101220213301"
    ##  [9] "101023311332333312310042312545121541355232566342466654642446644123243354413142100010434411303120123"
    ## [10] "120130020344442212321452432111214314224425462535564426355544623222244543342221430323224303412123123"

### formatting input data

``` r
input = input |>
  sapply(\(x) as.integer(strsplit(x, "")[[1]])) |>
  unname()

input[1:3, ]
```

    ##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
    ## [1,]    0    2    1    0    0    1    0    2    1     1     1     0     3     2
    ## [2,]    0    2    2    0    1    1    1    1    0     2     0     1     1     0
    ## [3,]    0    1    2    2    2    1    0    2    1     0     0     3     3     2
    ##      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
    ## [1,]     2     1     1     3     3     1     2     0     1     3     4     2
    ## [2,]     3     3     0     2     0     1     4     3     2     4     0     1
    ## [3,]     1     0     1     3     1     3     4     3     2     0     4     2
    ##      [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
    ## [1,]     3     2     1     4     2     3     0     0     2     0     1     2
    ## [2,]     3     0     0     2     2     0     0     3     0     1     2     3
    ## [3,]     0     4     0     1     0     3     1     2     0     5     2     2
    ##      [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
    ## [1,]     1     1     1     1     4     4     3     2     1     2     4     4
    ## [2,]     5     2     2     2     3     3     5     1     5     2     5     5
    ## [3,]     5     1     5     5     1     1     1     5     5     1     2     3
    ##      [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] [,61] [,62]
    ## [1,]     2     5     2     2     5     2     1     4     3     3     3     2
    ## [2,]     5     5     2     5     4     2     4     5     5     1     5     3
    ## [3,]     3     5     4     5     2     1     2     5     4     4     5     5
    ##      [,63] [,64] [,65] [,66] [,67] [,68] [,69] [,70] [,71] [,72] [,73] [,74]
    ## [1,]     3     3     0     4     2     1     4     2     3     2     4     3
    ## [2,]     3     3     1     4     3     3     4     0     3     2     2     3
    ## [3,]     3     5     1     1     3     4     0     1     1     4     1     1
    ##      [,75] [,76] [,77] [,78] [,79] [,80] [,81] [,82] [,83] [,84] [,85] [,86]
    ## [1,]     4     2     3     1     4     0     2     2     1     2     0     1
    ## [2,]     0     1     1     1     0     4     0     3     0     2     0     0
    ## [3,]     0     3     2     0     3     3     0     3     4     1     1     1
    ##      [,87] [,88] [,89] [,90] [,91] [,92] [,93] [,94] [,95] [,96] [,97] [,98]
    ## [1,]     3     1     3     2     3     2     0     0     2     1     0     1
    ## [2,]     3     1     1     2     1     0     0     0     1     2     2     0
    ## [3,]     1     0     0     1     2     0     3     2     1     1     0     0
    ##      [,99]
    ## [1,]     0
    ## [2,]     2
    ## [3,]     2

### creating matrices to track visible trees and keeping track of how many

``` r
visibility = input ^ 0
score = input * 0

visibility[1:3, ]
```

    ##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
    ## [1,]    1    1    1    1    1    1    1    1    1     1     1     1     1     1
    ## [2,]    1    1    1    1    1    1    1    1    1     1     1     1     1     1
    ## [3,]    1    1    1    1    1    1    1    1    1     1     1     1     1     1
    ##      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
    ## [1,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [2,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [3,]     1     1     1     1     1     1     1     1     1     1     1     1
    ##      [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
    ## [1,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [2,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [3,]     1     1     1     1     1     1     1     1     1     1     1     1
    ##      [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
    ## [1,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [2,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [3,]     1     1     1     1     1     1     1     1     1     1     1     1
    ##      [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] [,61] [,62]
    ## [1,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [2,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [3,]     1     1     1     1     1     1     1     1     1     1     1     1
    ##      [,63] [,64] [,65] [,66] [,67] [,68] [,69] [,70] [,71] [,72] [,73] [,74]
    ## [1,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [2,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [3,]     1     1     1     1     1     1     1     1     1     1     1     1
    ##      [,75] [,76] [,77] [,78] [,79] [,80] [,81] [,82] [,83] [,84] [,85] [,86]
    ## [1,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [2,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [3,]     1     1     1     1     1     1     1     1     1     1     1     1
    ##      [,87] [,88] [,89] [,90] [,91] [,92] [,93] [,94] [,95] [,96] [,97] [,98]
    ## [1,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [2,]     1     1     1     1     1     1     1     1     1     1     1     1
    ## [3,]     1     1     1     1     1     1     1     1     1     1     1     1
    ##      [,99]
    ## [1,]     1
    ## [2,]     1
    ## [3,]     1

``` r
score[1:3, ]
```

    ##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14]
    ## [1,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0
    ## [2,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0
    ## [3,]    0    0    0    0    0    0    0    0    0     0     0     0     0     0
    ##      [,15] [,16] [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26]
    ## [1,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [2,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [3,]     0     0     0     0     0     0     0     0     0     0     0     0
    ##      [,27] [,28] [,29] [,30] [,31] [,32] [,33] [,34] [,35] [,36] [,37] [,38]
    ## [1,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [2,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [3,]     0     0     0     0     0     0     0     0     0     0     0     0
    ##      [,39] [,40] [,41] [,42] [,43] [,44] [,45] [,46] [,47] [,48] [,49] [,50]
    ## [1,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [2,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [3,]     0     0     0     0     0     0     0     0     0     0     0     0
    ##      [,51] [,52] [,53] [,54] [,55] [,56] [,57] [,58] [,59] [,60] [,61] [,62]
    ## [1,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [2,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [3,]     0     0     0     0     0     0     0     0     0     0     0     0
    ##      [,63] [,64] [,65] [,66] [,67] [,68] [,69] [,70] [,71] [,72] [,73] [,74]
    ## [1,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [2,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [3,]     0     0     0     0     0     0     0     0     0     0     0     0
    ##      [,75] [,76] [,77] [,78] [,79] [,80] [,81] [,82] [,83] [,84] [,85] [,86]
    ## [1,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [2,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [3,]     0     0     0     0     0     0     0     0     0     0     0     0
    ##      [,87] [,88] [,89] [,90] [,91] [,92] [,93] [,94] [,95] [,96] [,97] [,98]
    ## [1,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [2,]     0     0     0     0     0     0     0     0     0     0     0     0
    ## [3,]     0     0     0     0     0     0     0     0     0     0     0     0
    ##      [,99]
    ## [1,]     0
    ## [2,]     0
    ## [3,]     0

### implementing logic to determine which trees are visible

``` r
for (i in 2:(nrow(input) - 1)) {
  for (j in 2:(ncol(input) - 1)) {
    surrounding_trees = list(input[i, 1:(j - 1)],
                             rev(input[i, (j + 1):ncol(input)]),
                             input[1:(i - 1), j],
                             rev(input[(i + 1):nrow(input), j]))
    
    visibility[i, j] = surrounding_trees |>
      sapply(\(x) max(x) < input[i, j]) |>
      any()
    
    score[i, j] = surrounding_trees |>
      lapply(\(x) cumsum(input[i, j] <= x)) |>
      sapply(\(x) sum(x == max(x))) |>
      prod()
  }
}
```

### part 1 solution

``` r
sum(visibility)
```

    ## [1] 1785

### part 2 solution

``` r
max(score)
```

    ## [1] 345168
